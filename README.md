# Fluent Solo for PHP
Solo is a simple open source library for building responsive transactional email notifications quickly with minimal markup. It's great for generating user notifications like password resets, user welcomes, receipts, shipping notifications etc. 

## Benefits ##
- Easy API to generate HTML based e-mail messages in your app
- Cleaner code base with less markup and no views required
- Less time wrestling with tables and CSS inlining
- Responsive out of the box
- A free and open alternative to the [Fluent Web Service](http://fluentmsg.com)

![Mockup](https://github.com/fivesqrd/fluent-solo-php/blob/1.0/docs/mockups/Responsive-Devices-Website.png "Responsive layout")

## Live Demo ##

To see a real sample in your inbox, head on over to http://fluentmsg.com and send a test email to yourself.

## How it works ##
At the foundation is a single column responsive layout with support for several types of UI components. Each UI component occupies the full width of the layout and the content is built up by stacking one component on top of another. By combining several UI components together, one can easily generate many of the most common types of user notifications needed for a project.  

## UI Compents ##
The current supported UI components are:
1. Teaser - a short piece of text displayed on the list of view of most email clients
2. Logo - image displayed at the top of a message
3. Title - heading inside the message body
4. Paragraphs - sections of text seperated by decent helping of space
5. Numbers - highlight a numeric value with a caption
6. Buttons - call to action button
7. Segments - custom HTML to be displayed
8. Footer - a line of text at the bottom for an address, opt out, etc

## Design ##

Baked into the Stacker library is a responsive HTML layout and markup various reusable UI components. Currently this repo includes a beautiful, minimal, open source design called [Musimal](https://github.com/fivesqrd/musimal). We hope to add more designs in the future.

## Sample Email Layout ##
Below is a sample of an email layout that uses some of the UI components
![Layout](https://github.com/fivesqrd/fluent-stacker-php/blob/1.0/docs/mockups/Layout-640x960.png "Responsive e-mail layout")

## Install ##
```
php composer.phar require fluent/stacker:1.0
```

For Laravel projects there is an easy to install package available here: https://github.com/Five-Squared/Fluent-Laravel

Not using PHP? Check out our [Fluent Web Service](http://fluentmsg.com) for a cross platform solution with a bunch of extra features.


## Quick Example ##
Create a responsive HTML message body:
```
$message = (new Fluent\Layout())->create()
    ->title('My little pony')
    ->paragraph('Lorem ipsum dolor sit amet, consectetur adipiscing elit.')
    ->number(['caption' => 'Today', value => date('j M Y')])
    ->button('http://www.mypony.com', 'Like my pony')
    ->paragraph('Pellentesque habitant morbi tristique senectus et netus et malesuada fames.')
    ->render();
```

## Config ##
Certain aspects can be customised by passing some config parameters:

```
$config = array(
    'logo'          => 'My App', //Plain text or publicly available URL. Image not wider than 200px
    'color'         => '#ff6600', //Primary colour
    'teaser'        => 'Look at my test', //Text visible in message preview only
    'footer'        => 'My test generated by Fluent Stacker', //Text at bottom of all messages
);

$message = (new Fluent\Layout($config))->create()
    ->title('My little pony')
    ->paragraph('Lorem ipsum dolor sit amet, consectetur adipiscing elit.')
    ->number(['caption' => 'Today', value => date('j M Y')])
    ->button('http://www.mypony.com', 'Like my pony')
    ->paragraph('Pellentesque habitant morbi tristique senectus et netus et malesuada fames.')
    ->render();
```

## Sending with mail() ##
Sending the message in PHP
```
$message = (new Fluent\Layout())->create()
    ->title('My little pony')
    ->paragraph('Lorem ipsum dolor sit amet, consectetur adipiscing elit.')
    ->number(['caption' => 'Today', value => date('j M Y')])
    ->button('http://www.mypony.com', 'Like my pony')
    ->paragraph('Pellentesque habitant morbi tristique senectus et netus et malesuada fames.')
    ->render();

$headers = [
    'MIME-Version: 1.0',
    'Content-type: text/html; charset=iso-8859-1'
];

mail($to, $subject, $message, implode("\r\n", $headers));
```

## Fluent Web Service ##
The Fluent Web Service makes email delivery simple and provides a bunch of other helpful features.

Stacker can be used locally or integrated with the Fluent Web Service to extend its capabilities. 

To make use of these features, you'll need a [Fluent Web Service](http://fluentmsg.com) account and the Fluent Client for PHP:
```
php composer.phar require fluent/client:4.0
```

Once the Fluent Client is in place, the send() method can be used to deliver messages easily:

### Double action: Create and send ###
Create and send expressively:
```
$messageId = (new Fluent\Layout())->create()
    ->title('My little pony')
    ->paragraph('Lorem ipsum dolor sit amet, consectetur adipiscing elit.')
    ->send([
        'subject'   => 'Testing it', 
        'recipient' => 'user@theirdomain.com', 
        'sender'    => 'me@myapp.com'
    ]);
```

Create and send expressively:
```
$messageId = (new Fluent\Message())->create()
    ->title('My little pony')
    ->paragraph('Lorem ipsum dolor sit amet, consectetur adipiscing elit.')
    ->deliver()
    ->subject('Testing it')
    ->header('Reply-To', 'me@myapp.com')
    ->from('me@myapp.com', 'My App')
    ->to('user@theirdomain.com')
    ->send();
```
